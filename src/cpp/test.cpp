#include <iostream>
using namespace std;

int main(){

double Gi       =  7.5270410e+02;
double Gx[3]   ={  5.1086103e+04,   8.7957628e+03,   1.0846386e+02 };
double Gp[300] = { 

-7.5270410e+02,  -8.2488438e+02,  -9.2893823e+02,  -1.0375385e+03,  -1.1338870e+03,  -1.2091946e+03,  -1.2603689e+03,  -1.2880555e+03,
-1.2950874e+03,  -1.2853329e+03,  -1.2628982e+03,  -1.2316237e+03,  -1.1948055e+03,  -1.1550825e+03,  -1.1144327e+03,  -1.0742364e+03, 
-1.0353745e+03,  -9.9833595e+02,  -9.6332254e+02,  -9.3034006e+02,  -8.9927288e+02,  -8.6994110e+02,  -8.4214137e+02,  -8.1567396e+02, 
-7.9035881e+02,  -7.6604326e+02,  -7.4260420e+02,  -7.1994637e+02,  -6.9799874e+02,  -6.7670994e+02,  -6.5604368e+02,  -6.3597444e+02, 
-6.1648401e+02,  -5.9755861e+02,  -5.7918681e+02,  -5.6135814e+02,  -5.4406213e+02,  -5.2728784e+02,  -5.1102363e+02,  -4.9525717e+02, 

-4.7997552e+02,  -4.6516532e+02,  -4.5081298e+02,  -4.3690481e+02,  -4.2342723e+02,  -4.1036684e+02,  -3.9771057e+02,  -3.8544568e+02, 
-3.7355981e+02,  -3.6204103e+02,  -3.5087781e+02,  -3.4005902e+02,  -3.2957391e+02,  -3.1941212e+02,  -3.0956363e+02,  -3.0001874e+02, 
-2.9076808e+02,  -2.8180259e+02,  -2.7311347e+02,  -2.6469223e+02,  -2.5653060e+02,  -2.4862060e+02,  -2.4095447e+02,  -2.3352471e+02, 
-2.2632404e+02,  -2.1934539e+02,  -2.1258193e+02,  -2.0602701e+02,  -1.9967421e+02,  -1.9351730e+02,  -1.8755023e+02,  -1.8176716e+02, 
-1.7616241e+02,  -1.7073048e+02,  -1.6546604e+02,  -1.6036392e+02,  -1.5541913e+02,  -1.5062680e+02,  -1.4598225e+02,  -1.4148090e+02, 

-1.3711836e+02,  -1.3289033e+02,  -1.2879266e+02,  -1.2482135e+02,  -1.2097249e+02,  -1.1724231e+02,  -1.1362715e+02,  -1.1012346e+02, 
-1.0672780e+02,  -1.0343684e+02,  -1.0024737e+02,  -9.7156235e+01,  -9.4160417e+01,  -9.1256974e+01,  -8.8443057e+01,  -8.5715906e+01,
-8.3072847e+01,  -8.0511285e+01,  -7.8028708e+01,  -7.5622680e+01,  -7.3290842e+01,  -7.1030906e+01,  -6.8840654e+01,  -6.6717937e+01, 
-6.4660675e+01,  -6.2666847e+01,  -6.0734499e+01,  -5.8861734e+01,  -5.7046716e+01,  -5.5287664e+01,  -5.3582851e+01,  -5.1930607e+01, 
-5.0329309e+01,  -4.8777387e+01,  -4.7273318e+01,  -4.5815627e+01,  -4.4402884e+01,  -4.3033703e+01,  -4.1706741e+01,  -4.0420695e+01, 

-3.9174305e+01,  -3.7966347e+01,  -3.6795636e+01,  -3.5661025e+01,  -3.4561399e+01,  -3.3495680e+01,  -3.2462823e+01,  -3.1461814e+01, 
-3.0491671e+01,  -2.9551443e+01,  -2.8640206e+01,  -2.7757068e+01,  -2.6901162e+01,  -2.6071647e+01,  -2.5267711e+01,  -2.4488565e+01, 
-2.3733443e+01,  -2.3001606e+01,  -2.2292335e+01,  -2.1604935e+01,  -2.0938731e+01,  -2.0293070e+01,  -1.9667317e+01,  -1.9060860e+01, 
-1.8473104e+01,  -1.7903471e+01,  -1.7351402e+01,  -1.6816357e+01,  -1.6297811e+01,  -1.5795254e+01,  -1.5308193e+01,  -1.4836152e+01, 
-1.4378665e+01,  -1.3935286e+01,  -1.3505579e+01,  -1.3089121e+01,  -1.2685506e+01,  -1.2294336e+01,  -1.1915228e+01,  -1.1547810e+01, 

-1.1191721e+01,  -1.0846613e+01,  -1.0512147e+01,  -1.0187993e+01,  -9.8738357e+00,  -9.5693652e+00,  -9.2742833e+00,  -8.9883004e+00, 
-8.7111361e+00,  -8.4425182e+00,  -8.1821834e+00,  -7.9298762e+00,  -7.6853491e+00,  -7.4483621e+00,  -7.2186829e+00,  -6.9960859e+00, 
-6.7803529e+00,  -6.5712722e+00,  -6.3686387e+00,  -6.1722536e+00,  -5.9819241e+00,  -5.7974636e+00,  -5.6186912e+00,  -5.4454313e+00, 
-5.2775140e+00,  -5.1147747e+00,  -4.9570535e+00,  -4.8041959e+00,  -4.6560517e+00,  -4.5124757e+00,  -4.3733270e+00,  -4.2384692e+00, 
-4.1077697e+00,  -3.9811006e+00,  -3.8583374e+00,  -3.7393597e+00,  -3.6240509e+00,  -3.5122977e+00,  -3.4039906e+00,  -3.2990232e+00, 

-3.1972926e+00,  -3.0986990e+00,  -3.0031456e+00,  -2.9105388e+00,  -2.8207875e+00,  -2.7338039e+00,  -2.6495025e+00,  -2.5678006e+00, 
-2.4886182e+00,  -2.4118774e+00,  -2.3375030e+00,  -2.2654220e+00,  -2.1955638e+00,  -2.1278597e+00,  -2.0622434e+00,  -1.9986504e+00, 
-1.9370184e+00,  -1.8772869e+00,  -1.8193973e+00,  -1.7632929e+00,  -1.7089184e+00,  -1.6562207e+00,  -1.6051480e+00,  -1.5556503e+00, 
-1.5076788e+00,  -1.4611866e+00,  -1.4161281e+00,  -1.3724590e+00,  -1.3301365e+00,  -1.2891191e+00,  -1.2493665e+00,  -1.2108398e+00, 
-1.1735011e+00,  -1.1373138e+00,  -1.1022424e+00,  -1.0682525e+00,  -1.0353107e+00,  -1.0033847e+00,  -9.7244319e-01,  -9.4245583e-01, 

-9.1339319e-01,  -8.8522674e-01,  -8.5792885e-01,  -8.3147274e-01,  -8.0583245e-01,  -7.8098282e-01,  -7.5689948e-01,  -7.3355879e-01, 
-7.1093785e-01,  -6.8901446e-01,  -6.6776713e-01,  -6.4717499e-01,  -6.2721786e-01,  -6.0787614e-01,  -5.8913085e-01,  -5.7096362e-01, 
-5.5335660e-01,  -5.3629253e-01,  -5.1975467e-01,  -5.0372678e-01,  -4.8819314e-01,  -4.7313851e-01,  -4.5854813e-01,  -4.4440766e-01, 
-4.3070325e-01,  -4.1742144e-01,  -4.0454920e-01,  -3.9207391e-01,  -3.7998332e-01,  -3.6826556e-01,  -3.5690915e-01,  -3.4590293e-01, 
-3.3523612e-01,  -3.2489824e-01,  -3.1487915e-01,  -3.0516902e-01,  -2.9575832e-01,  -2.8663783e-01,  -2.7779858e-01,  -2.6923192e-01, 

-2.6092942e-01,  -2.5288295e-01,  -2.4508462e-01,  -2.3752676e-01,  -2.3020196e-01,  -2.2310305e-01,  -2.1622304e-01,  -2.0955520e-01, 
-2.0309297e-01,  -1.9683002e-01,  -1.9076021e-01,  -1.8487757e-01,  -1.7917634e-01,  -1.7365092e-01,  -1.6829589e-01,  -1.6310600e-01, 
-1.5807614e-01,  -1.5320140e-01,  -1.4847698e-01,  -1.4389825e-01

};

cout << "Gp[0] : " << Gp[0] << endl;
cout << "Gp[299] : " << Gp[299] << endl;



}







//////////////////////

double Gi       =  7.5270410e+02;
double Gx[3]   ={  5.1086103e+04,   8.7957628e+03,   1.0846386e+02 };
double Gp[300] = { 

-7.5270410e+02,  -8.2488438e+02,  -9.2893823e+02,  -1.0375385e+03,  -1.1338870e+03,  -1.2091946e+03,  -1.2603689e+03,  -1.2880555e+03,
-1.2950874e+03,  -1.2853329e+03,  -1.2628982e+03,  -1.2316237e+03,  -1.1948055e+03,  -1.1550825e+03,  -1.1144327e+03,  -1.0742364e+03, 
-1.0353745e+03,  -9.9833595e+02,  -9.6332254e+02,  -9.3034006e+02,  -8.9927288e+02,  -8.6994110e+02,  -8.4214137e+02,  -8.1567396e+02, 
-7.9035881e+02,  -7.6604326e+02,  -7.4260420e+02,  -7.1994637e+02,  -6.9799874e+02,  -6.7670994e+02,  -6.5604368e+02,  -6.3597444e+02, 
-6.1648401e+02,  -5.9755861e+02,  -5.7918681e+02,  -5.6135814e+02,  -5.4406213e+02,  -5.2728784e+02,  -5.1102363e+02,  -4.9525717e+02, 

-4.7997552e+02,  -4.6516532e+02,  -4.5081298e+02,  -4.3690481e+02,  -4.2342723e+02,  -4.1036684e+02,  -3.9771057e+02,  -3.8544568e+02, 
-3.7355981e+02,  -3.6204103e+02,  -3.5087781e+02,  -3.4005902e+02,  -3.2957391e+02,  -3.1941212e+02,  -3.0956363e+02,  -3.0001874e+02, 
-2.9076808e+02,  -2.8180259e+02,  -2.7311347e+02,  -2.6469223e+02,  -2.5653060e+02,  -2.4862060e+02,  -2.4095447e+02,  -2.3352471e+02, 
-2.2632404e+02,  -2.1934539e+02,  -2.1258193e+02,  -2.0602701e+02,  -1.9967421e+02,  -1.9351730e+02,  -1.8755023e+02,  -1.8176716e+02, 
-1.7616241e+02,  -1.7073048e+02,  -1.6546604e+02,  -1.6036392e+02,  -1.5541913e+02,  -1.5062680e+02,  -1.4598225e+02,  -1.4148090e+02, 

-1.3711836e+02,  -1.3289033e+02,  -1.2879266e+02,  -1.2482135e+02,  -1.2097249e+02,  -1.1724231e+02,  -1.1362715e+02,  -1.1012346e+02, 
-1.0672780e+02,  -1.0343684e+02,  -1.0024737e+02,  -9.7156235e+01,  -9.4160417e+01,  -9.1256974e+01,  -8.8443057e+01,  -8.5715906e+01,
-8.3072847e+01,  -8.0511285e+01,  -7.8028708e+01,  -7.5622680e+01,  -7.3290842e+01,  -7.1030906e+01,  -6.8840654e+01,  -6.6717937e+01, 
-6.4660675e+01,  -6.2666847e+01,  -6.0734499e+01,  -5.8861734e+01,  -5.7046716e+01,  -5.5287664e+01,  -5.3582851e+01,  -5.1930607e+01, 
-5.0329309e+01,  -4.8777387e+01,  -4.7273318e+01,  -4.5815627e+01,  -4.4402884e+01,  -4.3033703e+01,  -4.1706741e+01,  -4.0420695e+01, 

-3.9174305e+01,  -3.7966347e+01,  -3.6795636e+01,  -3.5661025e+01,  -3.4561399e+01,  -3.3495680e+01,  -3.2462823e+01,  -3.1461814e+01, 
-3.0491671e+01,  -2.9551443e+01,  -2.8640206e+01,  -2.7757068e+01,  -2.6901162e+01,  -2.6071647e+01,  -2.5267711e+01,  -2.4488565e+01, 
-2.3733443e+01,  -2.3001606e+01,  -2.2292335e+01,  -2.1604935e+01,  -2.0938731e+01,  -2.0293070e+01,  -1.9667317e+01,  -1.9060860e+01, 
-1.8473104e+01,  -1.7903471e+01,  -1.7351402e+01,  -1.6816357e+01,  -1.6297811e+01,  -1.5795254e+01,  -1.5308193e+01,  -1.4836152e+01, 
-1.4378665e+01,  -1.3935286e+01,  -1.3505579e+01,  -1.3089121e+01,  -1.2685506e+01,  -1.2294336e+01,  -1.1915228e+01,  -1.1547810e+01, 

-1.1191721e+01,  -1.0846613e+01,  -1.0512147e+01,  -1.0187993e+01,  -9.8738357e+00,  -9.5693652e+00,  -9.2742833e+00,  -8.9883004e+00, 
-8.7111361e+00,  -8.4425182e+00,  -8.1821834e+00,  -7.9298762e+00,  -7.6853491e+00,  -7.4483621e+00,  -7.2186829e+00,  -6.9960859e+00, 
-6.7803529e+00,  -6.5712722e+00,  -6.3686387e+00,  -6.1722536e+00,  -5.9819241e+00,  -5.7974636e+00,  -5.6186912e+00,  -5.4454313e+00, 
-5.2775140e+00,  -5.1147747e+00,  -4.9570535e+00,  -4.8041959e+00,  -4.6560517e+00,  -4.5124757e+00,  -4.3733270e+00,  -4.2384692e+00, 
-4.1077697e+00,  -3.9811006e+00,  -3.8583374e+00,  -3.7393597e+00,  -3.6240509e+00,  -3.5122977e+00,  -3.4039906e+00,  -3.2990232e+00, 

-3.1972926e+00,  -3.0986990e+00,  -3.0031456e+00,  -2.9105388e+00,  -2.8207875e+00,  -2.7338039e+00,  -2.6495025e+00,  -2.5678006e+00, 
-2.4886182e+00,  -2.4118774e+00,  -2.3375030e+00,  -2.2654220e+00,  -2.1955638e+00,  -2.1278597e+00,  -2.0622434e+00,  -1.9986504e+00, 
-1.9370184e+00,  -1.8772869e+00,  -1.8193973e+00,  -1.7632929e+00,  -1.7089184e+00,  -1.6562207e+00,  -1.6051480e+00,  -1.5556503e+00, 
-1.5076788e+00,  -1.4611866e+00,  -1.4161281e+00,  -1.3724590e+00,  -1.3301365e+00,  -1.2891191e+00,  -1.2493665e+00,  -1.2108398e+00, 
-1.1735011e+00,  -1.1373138e+00,  -1.1022424e+00,  -1.0682525e+00,  -1.0353107e+00,  -1.0033847e+00,  -9.7244319e-01,  -9.4245583e-01, 

-9.1339319e-01,  -8.8522674e-01,  -8.5792885e-01,  -8.3147274e-01,  -8.0583245e-01,  -7.8098282e-01,  -7.5689948e-01,  -7.3355879e-01, 
-7.1093785e-01,  -6.8901446e-01,  -6.6776713e-01,  -6.4717499e-01,  -6.2721786e-01,  -6.0787614e-01,  -5.8913085e-01,  -5.7096362e-01, 
-5.5335660e-01,  -5.3629253e-01,  -5.1975467e-01,  -5.0372678e-01,  -4.8819314e-01,  -4.7313851e-01,  -4.5854813e-01,  -4.4440766e-01, 
-4.3070325e-01,  -4.1742144e-01,  -4.0454920e-01,  -3.9207391e-01,  -3.7998332e-01,  -3.6826556e-01,  -3.5690915e-01,  -3.4590293e-01, 
-3.3523612e-01,  -3.2489824e-01,  -3.1487915e-01,  -3.0516902e-01,  -2.9575832e-01,  -2.8663783e-01,  -2.7779858e-01,  -2.6923192e-01, 

-2.6092942e-01,  -2.5288295e-01,  -2.4508462e-01,  -2.3752676e-01,  -2.3020196e-01,  -2.2310305e-01,  -2.1622304e-01,  -2.0955520e-01, 
-2.0309297e-01,  -1.9683002e-01,  -1.9076021e-01,  -1.8487757e-01,  -1.7917634e-01,  -1.7365092e-01,  -1.6829589e-01,  -1.6310600e-01, 
-1.5807614e-01,  -1.5320140e-01,  -1.4847698e-01,  -1.4389825e-01

};

//// Variables for Preview Control
//// X(k) : state vector, zmp_x_ref : ZMP reference,  u_x : input u jerks, zmp_x : output zmp, err_x : error ZMP    in X-direction
//// Y(k) : state vector, zmp_y_ref : ZMP reference,  u_y : input u jerks, zmp_y : output zmp, err_y : error ZMP    in Y-direction

// X = zeros(3,1); % X(k)
// X_new = zeros(3,1); % X(k+1)
// zmp_x_ref = zeros(1,n); % ZMP reference  P_ref 의 궤적을 담은 행렬
// u_x = 0; % control input jerk

// Y = zeros(3,1); % Y(k)
// Y_new = zeros(3,1); % Y(k+1)
// zmp_y_ref = zeros(1,n); % ZMP reference
// u_y = 0; % control input jerk

// zmp_x = zeros(1,n);  % p(k)
// zmp_x_old = 0;
// zmp_y = zeros(1,n);
// zmp_y_old = 0;
// com_x = zeros(1,n); % com의 궤적을 담은 행렬
// com_y = zeros(1,n);

// err_x =0; %error of ZMP  p(k) - p_ref(k)
// err_y =0; %error of ZMP

// sum_e_x = 0; %sum of error   e(0) + e(1) + ... +e(k)
// sum_e_y = 0; %sum of error

// u_sum_p_x = 0; %sum of future reference  Gp(1) * p_ref(k+1)  +....+  Gp(N) * p_ref(k+N) 
// u_sum_p_y = 0; %sum of future reference

VectorXd X(3);
VectorXd X_new(3);
VectorXd zmp_x_ref(3001);
double u_x = 0;

VectorXd Y(3);
VectorXd Y_new(3);
VectorXd zmp_y_ref(3001);
double u_y = 0;




X = VectorXd::Zero();
